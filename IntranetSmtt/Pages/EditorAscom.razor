@page "/editorascom"
@inject IJSRuntime JS

<div class="max-w-auto mx-auto p-0">
    <h1 class="text-2xl font-bold mb-4">Atualizar Carrossel de Notícias</h1>
    
    <div class="space-y-4">
        <!-- Grupo 1 -->
        <div class="p-4 border rounded-md shadow-sm bg-white">
            <h2 class="text-lg font-semibold mb-2">Notícia Primeira</h2>
            <input type="text" placeholder="Link da Matéria" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <input type="text" placeholder="Link da Imagem" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <input type="text" placeholder="Texto da Matéria" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <button class="bg-blue-500 text-white px-4 py-2 mt-2 rounded hover:bg-blue-600" @onclick="Salvar">Salvar</button>
        </div>
        
        <!-- Grupo 2 -->
        <div class="p-4 border rounded-md shadow-sm bg-white">
            <h2 class="text-lg font-semibold mb-2">Notícia Segunda</h2>
            <input type="text" placeholder="Link da Matéria" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <input type="text" placeholder="Link da Imagem" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <input type="text" placeholder="Texto da Matéria" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <button class="bg-blue-500 text-white px-4 py-2 mt-2 rounded hover:bg-blue-600" @onclick="Salvar">Salvar</button>
        </div>
        
        <!-- Grupo 3 -->
        <div class="p-4 border rounded-md shadow-sm bg-white">
            <h2 class="text-lg font-semibold mb-2">Notícia Terceira</h2>
            <input type="text" placeholder="Link da Matéria" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <input type="text" placeholder="Link da Imagem" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <input type="text" placeholder="Texto da Matéria" class="w-full p-2 border rounded mb-2 focus:outline-none">
            <button class="bg-blue-500 text-white px-4 py-2 mt-2 rounded hover:bg-blue-600" @onclick="Salvar">Salvar</button>
        </div>
    </div>
</div>

@if (!string.IsNullOrEmpty(SuccessMessage))
{
    <div class="fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center z-50" @onclick="CloseModal">
        <div class="bg-white p-6 rounded-md w-1/3" @onclick:stopPropagation>
            <h5 class="text-xl font-semibold mb-0">✅ Sucesso</h5>
            <p>@SuccessMessage</p>
            <button class="mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700"
                @onclick="CloseModal">Fechar</button>
        </div>
    </div>
}

@code {
    private string? SuccessMessage { get; set; } = null;   

    private async Task Salvar()
    {
        // Lógica para salvar o conteúdo do editor Quill
        var content = await JS.InvokeAsync<string>("eval", "quill.root.innerHTML");

        // Aqui você pode fazer o que quiser com o conteúdo, como salvar em um banco de dados

        // Exibir a mensagem de sucesso
        SuccessMessage = "Notícia Salva com Sucesso!";
    }

    private void CloseModal()
    {
        // Fechar o popup
        SuccessMessage = null;
    }


}
